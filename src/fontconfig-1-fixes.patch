From 107e1934711cd9246c03f01e0acecdede714ea73 Mon Sep 17 00:00:00 2001
From: Akira TAGOH <akira@tagoh.org>
Date: Thu, 14 Jun 2012 11:27:31 +0900
Subject: [PATCH] Fix the fail of make install with --disable-shared on Win32
 (cherry picked from commit
 997a64a67b77ae7c083f4a2898670201ed618fb2)

---
 configure.in    |    1 +
 src/Makefile.am |    2 ++
 3 files changed, 4 insertions(+)

diff --git a/configure.in b/configure.in
index da6ef95..88b6367 100644
--- a/configure.in
+++ b/configure.in
@@ -94,6 +94,7 @@ AC_SUBST(WARN_CFLAGS)
 dnl ==========================================================================
 
 AM_CONDITIONAL(CROSS_COMPILING, test $cross_compiling = yes)
+AM_CONDITIONAL(ENABLE_SHARED, test "$enable_shared" = "yes")
 
 dnl ==========================================================================
 
diff --git a/src/Makefile.am b/src/Makefile.am
index a7bb73c..81562cb 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -132,9 +132,11 @@ libfontconfig_la_LIBADD = $(ICONV_LIBS) $(FREETYPE_LIBS) $(LIBXML2_LIBS) $(EXPAT
 
 libfontconfig_la_DEPENDENCIES = $(fontconfig_def_dependency)
 
+if ENABLE_SHARED
 install-data-local: install-ms-import-lib install-libtool-import-lib
 
 uninstall-local: uninstall-ms-import-lib uninstall-libtool-import-lib
+endif
 
 PUBLIC_FILES = \
 	$(top_srcdir)/fontconfig/fontconfig.h \
-- 
1.7.10.4

