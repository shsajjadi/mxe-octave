# HG changeset patch
# User John Donoghue <john.donoghue@ieee.org>
# Date 1458419460 14400
#      Sat Mar 19 16:31:00 2016 -0400
# Node ID ff3a96a08ec915983ef9a1c189404578b00d2db4
# Parent  8e13dd6c295b004fb3e8df97b4ef6438b61bcf19
Check mingw hosttype via octave config (Bug #44795)

* src/Makefile.in: get CANONICAL_HOST_TYPE from octave-config to check target OS for using ws2_32

diff -r 8e13dd6c295b -r ff3a96a08ec9 src/Makefile.in
--- a/src/Makefile.in	Sat Mar 19 08:20:47 2016 +0100
+++ b/src/Makefile.in	Sat Mar 19 16:31:00 2016 -0400
@@ -17,9 +17,12 @@
 
 MKOCTFILE ?= @MKOCTFILE@
 PG_CONFIG ?= @PG_CONFIG@
+OCTAVE_CONFIG ?= @OCTAVE_CONFIG@
+
+CANONICAL_HOST_TYPE := $(shell $(OCTAVE_CONFIG) -p CANONICAL_HOST_TYPE))
 
 EXTRALIBS = 
-ifeq ($(OS),Windows_NT)
+ifneq (,$(findstring mingw,$(CANONICAL_HOST_TYPE)))
   EXTRALIBS = -lws2_32
 endif
 
